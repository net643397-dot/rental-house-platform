# æˆ¿æºä¿¡æ¯å¹³å° - House Rental Platform

[![Flask](https://img.shields.io/badge/Flask-2.0+-green.svg)](https://flask.palletsprojects.com/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0+-blue.svg)](https://www.mysql.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

ä¸€ä¸ªåŸºäºFlask + MySQLçš„äºŒæ‰‹æˆ¿ç§Ÿèµå¹³å°ï¼Œæ”¯æŒåœ°å›¾æ‰¾æˆ¿ã€æ™ºèƒ½æ¨èã€ç”¨æˆ·ç³»ç»Ÿç­‰å®Œæ•´åŠŸèƒ½ã€‚**é¡¹ç›®äº®ç‚¹**ï¼šåæ ‡è½¬æ¢ã€åœ°å›¾èšåˆã€é™„è¿‘æˆ¿æºç®—æ³•ã€å“åº”å¼è®¾è®¡ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹æ€§

- ğŸ  **æˆ¿æºæœç´¢ä¸ç­›é€‰** - æ”¯æŒåŒºåŸŸã€ä»·æ ¼ã€æˆ¿å‹ã€ç§Ÿèµç±»å‹ç­‰å¤šç»´åº¦ç­›é€‰
- ğŸ“ **åœ°å›¾æ‰¾æˆ¿åŠŸèƒ½** - åŸºäºç™¾åº¦åœ°å›¾çš„å®æ—¶æˆ¿æºæœç´¢ä¸å¯è§†åŒ–
- â­ **æ™ºèƒ½æ¨èç³»ç»Ÿ** - åŸºäºåŒºåŸŸ+ä»·æ ¼+ç§Ÿèµç±»å‹çš„ç›¸ä¼¼æˆ¿æºæ¨è
- ğŸ” **é™„è¿‘æˆ¿æºç®—æ³•** - é«˜æ€§èƒ½çš„åœ°ç†ä½ç½®æœç´¢ä¸è·ç¦»è®¡ç®—
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** - æˆ¿æºç»Ÿè®¡å›¾è¡¨ã€çƒ­åŠ›å›¾ã€èšåˆæ ‡è®°å±•ç¤º
- ğŸ‘¤ **ç”¨æˆ·ç³»ç»Ÿ** - æ³¨å†Œç™»å½•ã€æ”¶è—ç®¡ç†ã€æµè§ˆå†å²
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢ç«¯ä¸ç§»åŠ¨ç«¯
- ğŸš€ **ä¸€é”®éƒ¨ç½²** - å®Œæ•´çš„æ‰“åŒ…åˆ†å‘æ–¹æ¡ˆä¸éƒ¨ç½²è„šæœ¬

## ğŸ“‹ æŠ€æœ¯æ ˆ

**åç«¯æ¡†æ¶**: Flask 2.0 + SQLAlchemy ORM
**æ•°æ®åº“**: MySQL 8.0+ (113,318æ¡çœŸå®æˆ¿æºæ•°æ®)
**å‰ç«¯æŠ€æœ¯**: Bootstrap 5 + JavaScript + ç™¾åº¦åœ°å›¾API
**åœ°å›¾æœåŠ¡**: ç™¾åº¦åœ°å›¾BD-09åæ ‡ç³» + GCJ-02åæ ‡è½¬æ¢
**éƒ¨ç½²å·¥å…·**: PyInstaller + ä¸€é”®åˆå§‹åŒ–è„šæœ¬

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸€é”®å¯åŠ¨è„šæœ¬
```bash
# Windowsç”¨æˆ·
double-click start.bat

# æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ
start.bat
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
1. æŸ¥çœ‹è¯¦ç»†è¯´æ˜ï¼š[å¯åŠ¨æ“ä½œæŒ‡å—.md](å¯åŠ¨æ“ä½œæŒ‡å—.md)
2. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼šè¿è¡Œ `quick_check.bat`

## åŠŸèƒ½ç‰¹æ€§

- ğŸ  æˆ¿æºæœç´¢ä¸ç­›é€‰
- ğŸ“ åœ°å›¾æ‰¾æˆ¿åŠŸèƒ½
- â­ æˆ¿æºæ”¶è—
- ğŸ“Š æµè§ˆå†å²
- ğŸ” æ™ºèƒ½æ¨è
- ğŸ“± å“åº”å¼è®¾è®¡

## ç³»ç»Ÿè¦æ±‚

- Python 3.9+
- Condaç¯å¢ƒç®¡ç†å™¨
- MySQLæ•°æ®åº“
- æˆ¿æºæ•°æ®æ–‡ä»¶ï¼ˆhouse.sqlï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
rental-house-platform/
â”œâ”€â”€ ğŸ“„ app.py                      # Flaskä¸»åº”ç”¨ (38KB)
â”œâ”€â”€ ğŸ“„ database.py                 # æ•°æ®åº“æ¨¡å‹ä¸é…ç½®
â”œâ”€â”€ ğŸ“„ location_utils.py           # åœ°ç†ä½ï¿½ï¿½å·¥å…·å‡½æ•° (Haversineç®—æ³•)
â”œâ”€â”€ ğŸ“„ coordinate_converter.py     # BD-09ä¸GCJ-02åæ ‡è½¬æ¢
â”œâ”€â”€ ğŸ“„ run_app.py                  # æ‰“åŒ…å…¥å£æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ house.sql                   # æˆ¿æºæ•°æ®æ–‡ä»¶ (65MB, 11ä¸‡+æ¡æ•°æ®)
â”œâ”€â”€ ğŸ“„ add_location_fields.sql     # æ•°æ®åº“ç»“æ„æ›´æ–°
â”œâ”€â”€ ğŸ“„ config.json                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ setup_mysql.bat             # ä¸€é”®æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ ğŸ“„ start.bat                   # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ ğŸ“„ quick_check.bat             # ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
â”œâ”€â”€ ğŸ“„ amap_geocoding.py           # é«˜å¾·åœ°å›¾åœ°ç†ç¼–ç 
â”œâ”€â”€ ğŸ“„ map_house.spec              # PyInstalleræ‰“åŒ…é…ç½®
â”œâ”€â”€ ğŸ“ templates/                  # Jinja2 HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ index.html                 # æˆ¿æºåˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ house_detail.html          # æˆ¿æºè¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ map_search.html            # åœ°å›¾æ‰¾æˆ¿é¡µ
â”‚   â””â”€â”€ ...                        # å…¶ä»–æ¨¡æ¿
â”œâ”€â”€ ğŸ“ static/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/                       # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                        # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ images/                    # å›¾ç‰‡èµ„æº
â”œâ”€â”€ ğŸ“ dist/                       # PyInstalleræ‰“åŒ…è¾“å‡º
â””â”€â”€ ğŸ“ docs/                       # æ–‡æ¡£ç›®å½•
    â”œâ”€â”€ å¯åŠ¨æ“ä½œæŒ‡å—.md
    â”œâ”€â”€ é¡¹ç›®åŠŸèƒ½åˆ—è¡¨.md
    â”œâ”€â”€ é¡¹ç›®äº®ç‚¹.md
    â””â”€â”€ é¡¹ç›®éš¾ç‚¹.md
```

## è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- æœ¬åœ°ï¼šhttp://127.0.0.1:5000
- å±€åŸŸç½‘ï¼šhttp://[ä½ çš„IP]:5000

## æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **é¦–å…ˆè¿è¡Œç³»ç»Ÿæ£€æŸ¥**ï¼š
   ```bash
   quick_check.bat
   ```

2. **æŸ¥çœ‹è¯¦ç»†è§£å†³æ–¹æ¡ˆ**ï¼š
   å‚è€ƒ [å¯åŠ¨æ“ä½œæŒ‡å—.md](å¯åŠ¨æ“ä½œæŒ‡å—.md) ä¸­çš„"å¸¸è§é—®é¢˜è§£å†³"éƒ¨åˆ†

3. **å¸¸è§é—®é¢˜**ï¼š
   - MySQLè¿æ¥å¤±è´¥ â†’ æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
   - æ— æˆ¿æºæ•°æ® â†’ é‡æ–°å¯¼å…¥house.sql
   - å­—æ®µé”™è¯¯ â†’ æ‰§è¡Œadd_location_fields.sql

## å¼€å‘ä¿¡æ¯

- **æ¡†æ¶**ï¼šFlask + SQLAlchemy
- **æ•°æ®åº“**ï¼šMySQL 9.3.0
- **å‰ç«¯**ï¼šBootstrap 5 + JavaScript
- **æ•°æ®é‡**ï¼š113,318æ¡æˆ¿æºè®°å½•

## ğŸ¯ æ ¸å¿ƒç®—æ³•ä¸æŠ€æœ¯äº®ç‚¹

### 1. é™„è¿‘æˆ¿æºç®—æ³•
```python
# è¾¹ç•Œæ¡†é¢„ç­›é€‰ + ç»çº¬å·®æ’åº + å€™é€‰é›†é™åˆ¶ + Haversineç²¾ç®—
def get_nearby_houses(lat, lng, radius_km, limit=20):
    # 1. è®¡ç®—è¾¹ç•Œæ¡†
    bounds = get_nearby_bounds(lat, lng, radius_km)
    # 2. é¢„ç­›é€‰å€™é€‰æˆ¿æº
    candidates = House.query.filter(
        House.latitude.between(bounds['min_lat'], bounds['max_lat']),
        House.longitude.between(bounds['min_lng'], bounds['max_lng'])
    ).limit(limit * 5).all()
    # 3. ç²¾ç¡®è·ç¦»è®¡ç®—ä¸æ’åº
    return sorted(candidates, key=lambda h: calculate_distance(lat, lng, h.latitude, h.longitude))[:limit]
```

### 2. åæ ‡ç³»è½¬æ¢
- **BD-09åæ ‡ç³»**: ç™¾åº¦åœ°å›¾ä¸“ç”¨
- **GCJ-02åæ ‡ç³»**: å›½æµ‹å±€åæ ‡ç³»ï¼Œé«˜å¾·/è…¾è®¯åœ°å›¾ä½¿ç”¨
- **ç»Ÿä¸€è½¬æ¢**: å‰ç«¯è°ƒç”¨APIå‰è‡ªåŠ¨è½¬æ¢åæ ‡ç³»ï¼Œç¡®ä¿è®¡ç®—å‡†ç¡®æ€§

### 3. åœ°å›¾èšåˆå±•ç¤º
- **MarkerClusterer**: å¤§é‡æˆ¿æºæ ‡è®°èšåˆï¼Œæå‡æ¸²æŸ“æ€§èƒ½
- **çƒ­åŠ›å›¾æ¨¡å¼**: ç›´è§‚å±•ç¤ºæˆ¿æºå¯†åº¦åˆ†å¸ƒ
- **å®æ—¶æ›´æ–°**: ä¾§æ æˆ¿æºåˆ—è¡¨ä¸åœ°å›¾æ ‡è®°è”åŠ¨

## ğŸ“Š æ•°æ®è§„æ¨¡

- **æˆ¿æºæ€»é‡**: 113,318æ¡çœŸå®æˆ¿æºæ•°æ®
- **è¦†ç›–åŒºåŸŸ**: ä¸»è¦åŸå¸‚æ ¸å¿ƒåŒºåŸŸ
- **æ•°æ®å­—æ®µ**: ä½ç½®ã€ä»·æ ¼ã€é¢ç§¯ã€æˆ¿å‹ã€é…å¥—è®¾æ–½ç­‰30+å­—æ®µ
- **æ›´æ–°é¢‘ç‡**: æ”¯æŒæ‰¹é‡åœ°ç†ç¼–ç ä¸æ•°æ®æ›´æ–°

## ğŸš€ éƒ¨ç½²æ–¹å¼

### å¼€å‘ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å…‹éš†é¡¹ç›®
git clone [repository-url]
cd rental-house-platform

# 2. ç¯å¢ƒé…ç½®
conda create -n rental-house python=3.9
conda activate rental-house
pip install -r requirements.txt

# 3. æ•°æ®åº“åˆå§‹åŒ–
# è¿è¡Œ setup_mysql.bat æˆ–æ‰‹åŠ¨å¯¼å…¥
mysql -u root -p < house.sql

# 4. å¯åŠ¨åº”ç”¨
python app.py
# æˆ–ä½¿ç”¨ start.bat
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# PyInstaller æ‰“åŒ…
pyinstaller map_house.spec

# è¿è¡Œæ‰“åŒ…åçš„ç¨‹åº
cd dist/map_house
./map_house.exe
```

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

| é—®é¢˜ç±»å‹ | è§£å†³æ–¹æ¡ˆ |
|---------|---------|
| MySQLè¿æ¥å¤±è´¥(1045) | æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€ï¼Œä¿®æ”¹config.jsonä¸­çš„æ•°æ®åº“é…ç½® |
| æˆ¿æºæ•°æ®ä¸ºç©º | é‡æ–°æ‰§è¡Œsetup_mysql.batå¯¼å…¥æ•°æ® |
| åœ°å›¾ä¸æ˜¾ç¤º | æ£€æŸ¥ç™¾åº¦åœ°å›¾API Keyé…ç½®å’Œç½‘ç»œè¿æ¥ |
| åæ ‡åç§» | ç¡®è®¤BD-09ä¸GCJ-02åæ ‡ç³»è½¬æ¢æ­£ç¡®æ€§ |

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“ç´¢å¼•**: å…³é”®å­—æ®µå»ºç«‹å¤åˆç´¢å¼•ï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡80%
- **åˆ†é¡µåŠ è½½**: é¦–é¡µæˆ¿æºåˆ—è¡¨åˆ†é¡µå±•ç¤ºï¼Œå‡å°‘åˆå§‹åŠ è½½æ—¶é—´
- **åæ ‡ç¼“å­˜**: åœ°ç†ç¼–ç ç»“æœç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—
- **é™æ€èµ„æº**: CSS/JSå‹ç¼©ä¸ç‰ˆæœ¬æ§åˆ¶ï¼Œä¼˜åŒ–åŠ è½½é€Ÿåº¦

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ä½œè€…**: net
- **é¡¹ç›®æ—¶é—´**: 2025å¹´9æœˆ20æ—¥-10æœˆ12æ—¥
- **å¼€å‘å‘¨æœŸ**: 4ä¸ªå·¥ä½œæ—¥

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼

**ç‰ˆæœ¬**: v2.0 | **æœ€åæ›´æ–°**: 2025-10-12 | **çŠ¶æ€**: ç”Ÿäº§å°±ç»ª